<!DOCTYPE html>
<html>

<head>
    <title>Register</title>
</head>
<script src="socket.js"></script>

<body>
    <h1>Register</h1>
    <form action="" id="form">
        <label for="username">Username:</label>
        <input type="text" name="username" id="username" required>
        <br>
        <input type="submit" value="Register">
    </form>
    <script src="/socket.io/socket.io.js"></script>
    <script type="module">
        import { socket } from './socket.js';

        var form = document.getElementById('form');
        var user = document.getElementById('username');




        form.addEventListener('submit', function (e) {
            e.preventDefault();
            if (user.value) {
                // const socket = io({
                //     autoConnect: false,
                //     query: { token: user.value }

                // });
                socket.io.opts.query = { token: user.value };


                socket.connect();
                socket.on('redirect', (url) => {
                    window.location.href = url;
                });


                user.value = '';
            }
        });

    </script>

</body>

</html>